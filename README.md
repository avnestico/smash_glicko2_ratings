# smash_glicko2_ratings

## Python3 program for computing Glicko2 ratings of Super Smash Bros competitors

### Prerequisites

Windows: Just what's here.

Linux/OSX: The latest version of Python 3.

### Quick Setup

1. Download the repo: `git clone https://github.com/avnestico/smash_glicko2_ratings.git`
2. Go into the downloaded folder: `cd smash_glicko2_ratings`
3. Run the program:
    * Windows: `dist/SmashRankingsCalculator.exe`
    * Linux/OSX: `python SmashRankingsCalculator.py`
4. Watch the magic.

### How to use

When you download this repo, you'll see a file and two folders with the prefix "Melee". Depending on the game you're getting rankings for, this prefix could also be "SSB", "Brawl", "PM", or "Sm4sh".

`MeleeDates.txt`: A list of dates and tournaments.

    MeleeDates.txt

    2015-01-03
    Smash_The_Target
    SWEET_Prologue
    2015-01-10
    B.E.A.S.T_5
    2015-01-17
    Paragon_2015
    
`MeleeUrls/`: A folder containing text files with bracket urls corresponding to the above. Liquipedia and Challonge brackets are supported.

    Smash_The_Target.txt
    
    http://mh.challonge.com/stt1_pro


    SWEET_Prologue.txt
    
    http://wiki.teamliquid.net/smash/SWEET_Prologue&section=2
    http://wiki.teamliquid.net/smash/SWEET_Prologue/Singles_Top_32
    http://wiki.teamliquid.net/smash/SWEET_Prologue/Singles_Top_96_E
    http://wiki.teamliquid.net/smash/SWEET_Prologue/Singles_Top_96_F
    http://wiki.teamliquid.net/smash/SWEET_Prologue/Singles_Top_96_G
    http://wiki.teamliquid.net/smash/SWEET_Prologue/Singles_Top_96_H

    
    and so on...
    
`MeleeResults/`: A folder containing scraped matchups of the above tournaments. This is generated by the rest of the program, not inputted manually by you.

    Smash_The_Target.txt
    
    Jj,0,Jjff,2
    Max,0,Tag,2
    Twin A,2,Cornholio69,0
    Fortefreak,2,Smurfyexe,0
    Corn,0,Capn Scfifty,2
    Wizard,2,Tinmo,1
    Glitch,2,6669,1
    Toro,2,Chroma,1
    Janet,0,Travist,2
    Turnipslip,0,Eastcoastjeff,2
    etc.
    
If you want to use this program for your own tournaments, replace the contents of `MeleeDates.txt` with your own tournaments the same way:

* tournaments in chronological order
* each tournament following the day it took place
* multiple tournaments in the same week not separated by a date (you can use months as your time scale if your region doesn't have many tournaments; just be sure that you use dates of the form YYYY-MM-DD either way)
* every week (or month) that doesn't have a tournament should be present, with the next date immediately following it

Then, create a file for each tournament in `MeleeUrls/`, matching the name written down in `MeleeDates.txt` with `.txt` added to the end of each, containing a list of the urls where brackets can be found for the tournament.

For other games, perform the same process: for Sm4sh, you would write dates and filenames in `Sm4shDates.txt`, and create the corresponding files in `Sm4shUrls/`. A folder called `Sm4shResults/` will be created for the results to be written to.

Then, run `dist/SmashRankingsCalculator.exe --scrape` (Windows) or `python SmashRankingsCalculator.py --scrape` (Linux/OSX) to process all game data.

### Program arguments

`--help`: Print a help message.

`--scrape`: Use this argument if you wish to scrape all data, then process rankings.

`--scrape-tournament=<comma-separated list of filenames>`: Scrape any games found for one or more tournaments. Useful if you're adding a new tournament to the data set and don't want to re-scrape everything else again.

`--format=[human|tab]`: Set to 'human' by default, this can be set to 'tab' to display rankings as a tab-separated list for easy copy-pasting.

`--game=[SSB|Melee|Brawl|PM|Sm4sh]`: Set this if you only wish to display the rankings for one game.

`--top_amount=<int>`: Set the number of players to display in rankings. Set to 100 by default.

`--sort=[Middle|Low|Bottom]`: Set the sorting method for ranking display. 'Middle' displays (Rating), 'Low' displays (Rating - Variance), 'Bottom' displays (Rating - 2 * Variance). Default is 'Low'.

For example, the command I use to generate the global Glicko2 ratings found [here](https://goo.gl/bK9By7) is `python SmashRankingsCalculator.py --format=tab --game=Melee --top_amount=64`.

### Updating the player tag list

In `RankingSettings.py`, there is a long list of player tags. Each element of the list looks like these:

    ('[A]rmada', 'Armada'),
    ('P4K EMP Armada', 'Armada'),
    
The first string above is the player's tag as found in a bracket online, while the second string is the player's common name in the system.

If you find a player whose name has not been corrected, please send me a Pull Request with the correction in the list, ordered alphabetically by fixed name.

Note that the program ignores anything to the left of a pipe `|`, which usually denotes a sponsor, in a player's name. Thus, names with pipes do not need to be corrected.

Also, for simplicity's sake, all names are recorded in Title Case. That is, `SFAT` will correct to `Sfat`, `S0ft` to `S0Ft`, and `JackieTran.com` to `Jackietran.Com`. The program will ignore corrections meant to revert this.

### Building the Windows executable

If you wish to update the program and create a new Windows executable, run `python setup.py py2exe`. This requires having py2exe installed (`pip install py2exe`).
